<!-- chessboard.component.html -->

<!-- <div #chessboardContainer class="chessboard">
    <div *ngFor="let row of [0, 1, 2, 3, 4, 5, 6, 7]" class="flex">
        <div *ngFor="let col of [0, 1, 2, 3, 4, 5, 6, 7]" class="square square{{row}}{{col}} flex items-center justify-center"  [class.dark]="isDarkSquare(row, col)"  [class.light]="!isDarkSquare(row, col)" appHighlightOnDrag>
            <ng-container *ngIf="boardState[row][col] != '--'">
              <div>
                <img [src]="keyValuePairs.get(boardState[row][col])" class="chess-piece piece{{row}}{{col}} {{boardState[row][col]}}" 
                draggable="true"
                [style.z-index]="1" 
                (dragstart)="onDragStarted($event, row, col)" 
                (dragend)="onDragEnded($event, row, col)" />
              </div>
            </ng-container>
        </div>
    </div>
</div> -->

<!-- <div #chessboardContainer class="chessboard">
    <div *ngFor="let row of [0, 1, 2, 3, 4, 5, 6, 7]" class="flex">
        <div *ngFor="let col of [0, 1, 2, 3, 4, 5, 6, 7]" class="square square{{row}}{{col}} flex items-center justify-center"  [class.dark]="isDarkSquare(row, col)"  [class.light]="!isDarkSquare(row, col)" appHighlightOnDrag>
        </div>
    </div>
    <div *ngFor="let row of [0, 1, 2, 3, 4, 5, 6, 7]" class="flex">
        <ng-container *ngFor="let col of [0, 1, 2, 3, 4, 5, 6, 7]" >
            <ng-container *ngIf="boardState[row][col] != '--'">
                <img [src]="keyValuePairs.get(boardState[row][col])" class="chess-piece piece{{row}}{{col}} {{boardState[row][col]}}" 
                cdkDrag cdkDragBoundary=".chessboard" 
                [style.z-index]="1" 
                (cdkDragStarted)="onDragStarted(row, col, boardState[row][col] )" 
                (cdkDragEnded)="onDragEnded(row, col, boardState[row][col])"  />
            </ng-container>
        </ng-container>
    </div>
</div> -->



<div #chessboardContainer class="chessboard">
    <div *ngFor="let row of [0, 1, 2, 3, 4, 5, 6, 7]" class="flex">
        <div *ngFor="let col of [0, 1, 2, 3, 4, 5, 6, 7]" class="square square{{row}}{{col}} flex items-center justify-center"  [class.dark]="isDarkSquare(row, col)"  [class.light]="!isDarkSquare(row, col)" [style.z-index]="0"  appHighlightOnDrag>
            <ng-container *ngIf="boardState[row][col] != '--'">
              <div>
                <img [src]="keyValuePairs.get(boardState[row][col])" class="chess-piece piece{{row}}{{col}} {{boardState[row][col]}}" 
                draggable="true"
                [style.z-index]="1" 
                (dragstart)="onDragStarted($event, row, col, boardState[row][col] )" 
                (dragend)="onDragEnded($event, row, col, boardState[row][col])" />
              </div>
            </ng-container>
        </div>
    </div>
</div>
